#!/usr/bin/env python

import optparse
import sys

from pykeg.core import kegbot
from pykeg.core import util

# command line parser are defined here
parser = optparse.OptionParser()
parser.add_option('-D','--daemon',dest='daemon',action='store_true',
      help='run kegbot in daemon mode')
parser.set_defaults(daemon=False)
flags, args = parser.parse_args()


if __name__ == '__main__':
   if sys.version_info < (2,3):
      print>>sys.stderr, 'kegbot requires Python 2.3 or later; aborting'
      sys.exit(1)
   if flags.daemon:
      print 'Running in background'
      util.daemonize()
   else:
      print 'Running in foreground'
   kb = kegbot.KegBot(flags.daemon)
   kb.start()
